var itemsHolder = $('#<%= @category.id %>-items');
if (itemsHolder.hasClass('revealed')){
	
	itemsHolder.hide(300,function(){
		$('#new-category-<%=@category.id%>').fadeOut(200);
	});
	itemsHolder.removeClass('revealed');
	
} else {
	
	itemsHolder.fadeOut(200,function(){
		<% if @project %>
			$(this).html('<%= j render partial:"projects/subcategory", collection:@subcategories, as: :subcategory, cache: false %>');
		<% else %>
			$(this).html('<%= j render partial:"admin/subcategory", collection:@subcategories, as: :subcategory, cache: false %>');
		<% end %>
		$(this).addClass('revealed');
		$(this).show(300,function(){
			$('.items-container').addClass('collapsed');
			$('#new-category-<%=@category.id%>').fadeIn(200);
		});
	});
}

